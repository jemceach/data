---
title: "R Notebook"
output: html_notebook
---

This is an [R Markdown](http://rmarkdown.rstudio.com) Notebook. When you execute code within the notebook, the results appear beneath the code. 

Try executing this chunk by clicking the *Run* button within the chunk or by placing your cursor inside it and pressing *Ctrl+Shift+Enter*. 

```{r}
library(curl)
library(XML)
library(wbstats)
library(data.table)
```

```{r}
curl_download("http://api.worldbank.org/v2/countries/all/indicators/2.0.cov.Math.pl_2.all?per_page=10000", "math_proficiency.xml")
curl_download("http://api.worldbank.org/v2/countries/all/indicators/1.1_ACCESS.ELECTRICITY.TOT?per_page=10000", "electricity.xml")
curl_download("http://api.worldbank.org/v2/countries/all/indicators/1.1_YOUTH.LITERACY.RATE?per_page=10000", "youth_literacy.xml")
curl_download("http://api.worldbank.org/v2/countries/all/indicators/1.1.PGap.Poor4uds?per_page=10000", "poverty_gap.xml")
```


```{r}
curl_download("http://api.worldbank.org/v2/countries/all/indicators/IT.NET.USER.P3?per_page=10000", "internet_users_per_thousand.xml")
curl_download("http://api.worldbank.org/v2/countries/all/indicators/IT.NET.SECR.P6?per_page=10000", "secure_servers.xml")
curl_download("http://api.worldbank.org/v2/countries/all/indicators/2.0.cov.Int?per_page=10000", "internet_coverage.xml")

```

```{r echo = FALSE}
poverty.index <- curl_download("http://api.worldbank.org/v2/countries/all/indicators/UNDP.HDI.XD?per_page=20000", "poverty.xml");
xmlParse("poverty.xml");
xml.data <- xmlParse("poverty.xml");
rootNode <- xmlRoot(xml.data);
xml.data <- xmlSApply(rootNode,function(x) xmlSApply(x, xmlValue));
xml.frame <- data.frame(t(xml.data),row.names=NULL);
hdi <- xml.frame;
hdi
```
```{r}
annual.hdi <- c()
for (year in 2000:2017){
 annual.hdi[[year-1999]] <- subset(hdi, date==year)
}
annual.hdi[2000]
```

```{r}
indicators <- c("IT.NET.USER.P3", "IT.NET.SECR.P6", "IT.NET.BNDW.PC",  "gwp1", "IT.NET.BBND.P2", "IT.MOB.INVS.CD")
users <- wb(indicator = indicators[1])
servers <- wb(indicator = indicators[2])
bw_per_person <- wb(indicator = indicators[3])
internet_home <- wb(indicator = indicators[4])
fixed_broadband <- wb(indicator = indicators[5])
mobile_investment <- wb(indicator = indicators[6])
```

```{r}
internet.stats <- wb(indicator = indicators, return_wide = TRUE, startdate = 2000, enddate = 2017)
internet.stats
```
```{r}
countries <- unique(internet.stats$iso3c)
annual.int <- c()
country.int <- c()
for (year in 2000:2017){
  annual.int[[year-1999]] <- subset(internet.stats, date==year)
}
annual.int[1]
country.int[1]
```



```{r}
write.csv(internet.stats, "internet.csv")
```



